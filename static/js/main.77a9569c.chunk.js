(this.webpackJsonpimagefinder=this.webpackJsonpimagefinder||[]).push([[0],{101:function(e,t,a){e.exports=a(136)},106:function(e,t,a){},107:function(e,t,a){},130:function(e,t,a){},133:function(e,t,a){},134:function(e,t,a){},135:function(e,t,a){},136:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),l=a(9),o=a.n(l),c=(a(106),a(7)),i=a(83),u=a(167),s=a(194),m=a(173),d=a(196),g=a(189),f=a(197),E=a(175),h=a(50),p=a(84),b=a.n(p);a(107);function v(e){var t=e.getServerImages,a=e.page,l=e.setPage,o=Object(n.useState)(""),p=Object(c.a)(o,2),v=p[0],y=p[1],O=Object(n.useState)(15),j=Object(c.a)(O,1)[0],k=Object(n.useState)(!1),C=(Object(i.a)(k),Object(n.useState)(!1)),A=Object(c.a)(C,2),x=A[0],S=A[1],w=Object(n.useState)("Pixabay"),I=Object(c.a)(w,2),N=I[0],P=I[1];return Object(n.useEffect)((function(){t(N,v,j,a)}),[j,a]),Object(n.useEffect)((function(){1!==a?l(1):t(N,v,j,a)}),[N]),r.a.createElement(r.a.Fragment,null,r.a.createElement(u.a,{raised:!0,className:"card"},r.a.createElement(s.a,{className:"input",name:"search",label:"Search Images",variant:"outlined",defaultValue:v,fullWidth:!0,onChange:function(e){return y(e.target.value)},onKeyPress:function(e){"Enter"===e.key&&(1===a?t(N,v,j):l(1))}}),r.a.createElement(m.a,{style:{minWidth:"7rem",margin:" 0 0.5rem"}}," ",r.a.createElement(d.a,null,"Source"),r.a.createElement(g.a,{open:x,onClose:function(){return S(!1)},onOpen:function(){return S(!0)},value:N,onChange:function(e){return P(e.target.value)},variant:"filled"},r.a.createElement(f.a,{value:"Pixabay"},"Pixabay"),r.a.createElement(f.a,{value:"Unsplash"},"Unsplash"),r.a.createElement(f.a,{value:"Pexels"},"Pexels"),r.a.createElement(f.a,{value:"Giphy"},"Giphy"))),r.a.createElement(E.a,{style:{padding:"0 15"},variant:"contained",color:"secondary",className:"btn",startIcon:r.a.createElement(b.a,null),onClick:function(){return 1===a?t(N,v,j):l(1)}},r.a.createElement(h.a,null,"Search"))))}var y=a(181),O=a(182),j=a(193),k=a(180),C=a(179),A=a(177),x=a(192),S=a(190),w=a(18),I=a.n(w),N=a(178);function P(e){return r.a.createElement(S.a,Object.assign({elevation:6,variant:"filled"},e))}function F(e){var t=e.setAuth,a=e.setInfo,l=e.variant,o=e.onClick,i=Object(n.useState)(!1),u=Object(c.a)(i,2),m=u[0],d=u[1],g=Object(n.useState)(!1),f=Object(c.a)(g,2),h=f[0],p=f[1],b=Object(n.useState)(""),v=Object(c.a)(b,2),y=v[0],O=v[1],S=Object(n.useState)(""),w=Object(c.a)(S,2),F=w[0],W=w[1],L=Object(n.useState)(""),B=Object(c.a)(L,2),D=B[0],R=B[1],H=Object(n.useState)(""),T=Object(c.a)(H,2),z=T[0],U=T[1],q=Object(n.useState)(!1),Y=Object(c.a)(q,2),Z=Y[0],_=Y[1],G=function(){d(!m),O(""),R(""),W("")},J=new RegExp("^([a-zA-Z0-9_\\-\\.]+)@([a-zA-Z0-9_\\-\\.]+)\\.([a-zA-Z]{2,5})$"),K=function(e,t){"clickaway"!==t&&p(!1)};return Object(n.useEffect)((function(){z&&(p(!0),setTimeout((function(){return U("")}),6e3))}),[z]),r.a.createElement("div",null,r.a.createElement(E.a,{color:"inherit",onClick:G,variant:l},"Register"),r.a.createElement(j.a,{open:m,onClose:G,"aria-labelledby":"form-dialog-title"},r.a.createElement(A.a,{id:"form-dialog-title"},"Register"),Z?r.a.createElement(N.a,null):null,r.a.createElement(C.a,{dividers:!0},r.a.createElement(s.a,{autoFocus:!0,margin:"dense",id:"name",label:"Name",type:"name",fullWidth:!0,value:y,onChange:function(e){return O(e.target.value)}}),r.a.createElement(s.a,{margin:"dense",id:"email",label:"Email",type:"email",fullWidth:!0,value:F,onChange:function(e){return W(e.target.value)}}),r.a.createElement(s.a,{margin:"dense",id:"password",label:"Password",type:"password",fullWidth:!0,value:D,onChange:function(e){return R(e.target.value)}})),r.a.createElement(k.a,null,r.a.createElement(E.a,{onClick:function(){y.trim()&&F.trim()&&D.trim()?J.test(F.trim())?(_(!0),I.a.post("https://imageseeker.herokuapp.com/user/register",{name:y,email:F,password:D}).then((function(e){console.log(e),t({isAuth:!0,token:e.data.token,user:e.data.user}),a("Welcome, "+e.data.user.name+"!"),G(),o&&o()})).catch((function(e){return e.response?U(e.response.data.msg):U("Please check your network")})).finally((function(){return _(!1)}))):U("Enter a valid email id"):U("Enter all fields")},variant:"contained",color:"primary"},"Register"),r.a.createElement(E.a,{onClick:G,color:"secondary",variant:"contained"},"Cancel")),r.a.createElement(x.a,{open:h,autoHideDuration:6e3,onClose:K},r.a.createElement(P,{onClose:K,severity:"error"},z))))}function W(e){return r.a.createElement(S.a,Object.assign({elevation:6,variant:"filled"},e))}function L(e){var t=e.setAuth,a=e.setInfo,l=e.variant,o=e.onClick,i=Object(n.useState)(!1),u=Object(c.a)(i,2),m=u[0],d=u[1],g=Object(n.useState)(!1),f=Object(c.a)(g,2),h=f[0],p=f[1],b=Object(n.useState)(""),v=Object(c.a)(b,2),y=v[0],O=v[1],S=Object(n.useState)(""),w=Object(c.a)(S,2),P=w[0],F=w[1],L=Object(n.useState)(""),B=Object(c.a)(L,2),D=B[0],R=B[1],H=Object(n.useState)(!1),T=Object(c.a)(H,2),z=T[0],U=T[1],q=function(){d(!m),F(""),O("")},Y=function(e,t){"clickaway"!==t&&p(!1)};return Object(n.useEffect)((function(){D&&(p(!0),setTimeout((function(){return R("")}),6e3))}),[D]),r.a.createElement("div",null,r.a.createElement(E.a,{color:"inherit",variant:l,onClick:q},"Login"),r.a.createElement(j.a,{open:m,onClose:q,"aria-labelledby":"form-dialog-title"},r.a.createElement(A.a,{id:"form-dialog-title"},"Login"),z?r.a.createElement(N.a,null):null,r.a.createElement(C.a,{dividers:!0},r.a.createElement(s.a,{autoFocus:!0,margin:"dense",id:"email",label:"Email",type:"email",fullWidth:!0,value:y,onChange:function(e){return O(e.target.value)}}),r.a.createElement(s.a,{margin:"dense",id:"password",label:"Password",type:"password",fullWidth:!0,value:P,onChange:function(e){return F(e.target.value)}})),r.a.createElement(k.a,null,r.a.createElement(E.a,{onClick:function(){y.trim()&&P.trim()?(U(!0),I.a.post("https://imageseeker.herokuapp.com/user/login",{email:y,password:P}).then((function(e){console.log(e),t({isAuth:!0,token:e.data.token,user:e.data.user}),a("You are logged in"),q(),o&&o()})).catch((function(e){return e.response?R(e.response.data.msg):R("Please check your network")})).finally((function(){return U(!1)}))):R("Enter all fields")},variant:"contained",color:"primary"},"Login"),r.a.createElement(E.a,{onClick:q,color:"secondary",variant:"contained"},"Cancel")),r.a.createElement(x.a,{open:h,autoHideDuration:6e3,onClose:Y},r.a.createElement(W,{onClose:Y,severity:"error"},D))))}a(130);function B(e){var t=e.setAuth,a=e.setInfo,l=Object(n.useState)(!1),o=Object(c.a)(l,2),i=o[0],u=o[1],s=function(){u(!i)};return r.a.createElement("div",null,r.a.createElement(E.a,{color:"inherit",onClick:s},"Logout"),r.a.createElement(j.a,{open:i,onClose:s,"aria-labelledby":"form-dialog-title"},r.a.createElement(A.a,{id:"form-dialog-title"},"Confirm Logout"),r.a.createElement(C.a,null,r.a.createElement(h.a,{gutterBottom:!0},"Are you sure you want to logout?"," ")),r.a.createElement(k.a,null,r.a.createElement(E.a,{onClick:function(){t({isAuth:!1,token:"",user:{}}),a("You are logged out"),s()},variant:"contained",color:"primary"},"Yes"),r.a.createElement(E.a,{autoFocus:!0,onClick:s,color:"secondary",variant:"contained"},"No"))))}var D=a(35),R=a(183),H=function(e){var t=e.setAuth,a=e.auth,l=e.setInfo;return r.a.createElement("div",{className:"root"},r.a.createElement(y.a,{position:"static"},r.a.createElement(O.a,{className:"tool"},r.a.createElement("div",null,r.a.createElement(h.a,{variant:"h6",className:"title"},r.a.createElement(D.b,{style:{color:"white",textDecoration:"None"},to:"/"}," ","Image Finder"))),r.a.createElement("div",null,a.isAuth?r.a.createElement(n.Fragment,null,r.a.createElement(D.b,{to:"/",style:{color:"white",textDecoration:"None"}},r.a.createElement(E.a,{color:"inherit"},"Home")),r.a.createElement(D.b,{to:"/profile",style:{color:"white",textDecoration:"None"}},r.a.createElement(E.a,{color:"inherit"},"Profile")),r.a.createElement(B,{setAuth:t,setInfo:l})):r.a.createElement(n.Fragment,null,r.a.createElement(F,{setAuth:t,setInfo:l}),r.a.createElement(R.a,{color:"secondary",orientation:"vertical"}),r.a.createElement(L,{setAuth:t,setInfo:l}))))))},T=a(187),z=(a(133),a(176)),U=a(184),q=a(185),Y=a(186),Z=(a(134),a(25)),_=a(86),G=a.n(_),J=a(87),K=a.n(J),V=function(e){var t=e.favorite,a=e.auth,l=e.setAuth,o=e.toggle,c=e.image,i=a.user,u=i.name,s=i.email,m=i.favorites,d=a.token,g=a.isAuth;return r.a.createElement(n.Fragment,null,t?r.a.createElement(z.a,{title:"Remove from favorites",onClick:function(){I.a.put("https://imageseeker.herokuapp.com/user/removefavorite",c,{headers:{"x-auth-token":a.token}}).then((function(e){l({isAuth:g,token:d,user:{name:u,email:s,favorites:m.filter((function(t){return t!==e.data}))}})}))},style:{margin:0,padding:7}},r.a.createElement(G.a,{color:"secondary"})):r.a.createElement(z.a,{title:"Add to favorites",onClick:function(){I.a.put("https://imageseeker.herokuapp.com/user/addfavorite",c,{headers:{"x-auth-token":a.token}}).then((function(e){l({isAuth:g,token:d,user:{name:u,email:s,favorites:[e.data].concat(Object(Z.a)(m))}})})).catch((function(e){401===e.response.status&&o()}))},style:{margin:0,padding:7}},r.a.createElement(K.a,null)))},$=function(e){var t=e.image,a=e.handleClickOpen,n=e.auth,l=e.favorite,o=e.setAuth,c=e.toggle;return r.a.createElement(u.a,{key:t.id,raised:!0,className:"box"},r.a.createElement(U.a,{className:"header",style:{paddingTop:"5px",paddingBottom:"5px"},title:t.tags&&t.tags.length>25?t.tags.substring(0,25)+"...":t.tags,titleTypographyProps:{variant:"body1"},subheader:t.user}),r.a.createElement(q.a,{image:t.webformatURL,className:"image",onClick:function(){a(t.largeImageURL,t.download)}}),r.a.createElement(Y.a,{disableSpacing:!0,className:"cardAction",style:{margin:0,padding:0}},r.a.createElement(V,{favorite:l,auth:n,setAuth:o,toggle:c,image:t})))},M=a(89),Q=a.n(M),X=a(88),ee=a.n(X);function te(e){var t=e.auth,a=e.setAuth,l=e.images,o=e.toggle,i=Object(n.useState)({}),u=Object(c.a)(i,2),s=u[0],m=u[1],d=r.a.useState(!1),g=Object(c.a)(d,2),f=g[0],E=g[1],p=Object(T.a)((function(e){return{appBar:{position:"relative"},root:{display:"flex",flexWrap:"wrap",justifyContent:"space-around",overflow:"hidden"},gridList:{width:500,height:450},icon:{color:"rgba(255, 255, 255, 0.54)"},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))(),b=function(e,t){m({img:e,download:t}),E(!0)},v=function(){E(!1)};return r.a.createElement("div",{className:p.root},l.length?r.a.createElement("div",{className:"container"},l.map((function(e){return r.a.createElement($,{toggle:o,favorite:!(!t.isAuth||!t.user.favorites.find((function(t){return t===e.id}))),setAuth:a,auth:t,key:e.id,image:e,handleClickOpen:b})}))):r.a.createElement("div",{style:{display:"flex",justifyContent:"center",flexDirection:"column"}},r.a.createElement(h.a,{style:{color:"#444",marginTop:"2rem",textAlign:"center"}},"Opps... No images found. Here is a random image for you"),r.a.createElement("img",{alt:"",style:{maxHeight:"70vh",maxWidth:"100vw"},src:"https://source.unsplash.com/random"})),r.a.createElement(j.a,{style:{margin:0,padding:0},open:f,onClose:v,scroll:"body","aria-labelledby":"scroll-dialog-title","aria-describedby":"scroll-dialog-description",maxWidth:"lg"},r.a.createElement(k.a,null,r.a.createElement("a",{href:s.download||s.img,style:{color:"#555",marginBottom:"5px",padding:0,height:"0.5rem"},target:"_blank"},r.a.createElement(ee.a,null)),r.a.createElement(z.a,{onClick:v,style:{margin:0,padding:0}},r.a.createElement(Q.a,null))),r.a.createElement(C.a,{style:{padding:0}},r.a.createElement("img",{style:{maxWidth:"100%",maxHeight:"89vh",margin:"auto"},src:s.img,alt:""}))))}function ae(e){var t=e.open,a=e.toggle,n=e.setAuth,l=e.setInfo;return r.a.createElement("div",null,r.a.createElement(j.a,{open:t,onClose:a,"aria-labelledby":"form-dialog-title"},r.a.createElement(A.a,{id:"form-dialog-title"},"Login or Register"),r.a.createElement(C.a,{dividers:!0},r.a.createElement(h.a,null,"Login or Register to add to favorites. ")),r.a.createElement(k.a,null,r.a.createElement(F,{onClick:a,variant:"outlined",setAuth:n,setInfo:l}),r.a.createElement(L,{onClick:a,setAuth:n,setInfo:l,variant:"outlined"}),r.a.createElement(E.a,{autoFocus:!0,onClick:a,color:"secondary",variant:"contained"},"Cancel"))))}var ne=a(30),re=a(198),le=(a(135),a(90)),oe=a.n(le);function ce(e){var t=e.setAuth,a=e.setInfo,l=e.auth,o=Object(n.useState)(!1),i=Object(c.a)(o,2),u=i[0],s=i[1],m=function(){s(!u)};return r.a.createElement("div",null,r.a.createElement(E.a,{variant:"contained",startIcon:r.a.createElement(oe.a,null),color:"secondary",onClick:m},"Delete Account"),r.a.createElement(j.a,{open:u,onClose:m,"aria-labelledby":"form-dialog-title"},r.a.createElement(A.a,{id:"form-dialog-title"},"Danger!"),r.a.createElement(C.a,null,r.a.createElement(h.a,{gutterBottom:!0},"Are you sure? All data will be lost!"," ")),r.a.createElement(k.a,null,r.a.createElement(E.a,{onClick:function(){I.a.delete("https://imageseeker.herokuapp.com/user/removeuser",{headers:{"x-auth-token":l.token}}).then((function(e){a(e.data.msg),t({isAuth:!1,token:"",user:{}})})),m()},variant:"contained",color:"primary"},"I'm Sure"),r.a.createElement(E.a,{autoFocus:!0,onClick:m,color:"secondary",variant:"contained"},"No, I changed my mind"))))}var ie=function(e){var t=e.auth,a=e.setAuth,l=e.setInfo,o=Object(n.useState)([]),i=Object(c.a)(o,2),s=i[0],m=i[1];return Object(n.useEffect)((function(){I.a.get("https://imageseeker.herokuapp.com/user/getfavorites",{headers:{"x-auth-token":t.token}}).then((function(e){console.log(e.data),m(e.data)}))}),[a]),t.isAuth?r.a.createElement(n.Fragment,null,r.a.createElement(u.a,{className:"profile-card"},r.a.createElement(U.a,{style:{height:"20vh",margin:"auto"},avatar:r.a.createElement(re.a,{style:{backgroundColor:"red"}},t.user.name[0]),title:t.user.name,subheader:"Email: "+t.user.email,titleTypographyProps:{variant:"h5"}}),r.a.createElement("div",{className:"removebtn"},r.a.createElement(ce,{setAuth:a,setInfo:l,auth:t})),r.a.createElement(h.a,{variant:"h5",style:{textAlign:"Center",marginBottom:"1rem",padding:"3px",borderBottom:"1px dotted #444"}},"Favorites"),r.a.createElement(te,{images:s,auth:t,setAuth:a}))):r.a.createElement(ne.a,{to:"/"})},ue=a(188);function se(e){return r.a.createElement(S.a,Object.assign({elevation:6,variant:"filled"},e))}var me=function(){var e=Object(n.useState)(!1),t=Object(c.a)(e,2),a=t[0],l=t[1],o=Object(n.useState)(!1),i=Object(c.a)(o,2),u=i[0],s=i[1],m=Object(n.useState)(!1),d=Object(c.a)(m,2),g=d[0],f=d[1],E=Object(n.useState)({q:"",source:"",hits:10}),p=Object(c.a)(E,2),b=p[0],y=p[1],O=Object(n.useState)(""),j=Object(c.a)(O,2),k=j[0],C=j[1],A=Object(n.useState)([]),S=Object(c.a)(A,2),w=S[0],P=S[1],F=Object(n.useState)(1),W=Object(c.a)(F,2),L=W[0],B=W[1],R=Object(n.useState)("https://imageseeker.herokuapp.com/"),T=Object(c.a)(R,1)[0],z=Object(n.useState)({isAuth:!1,token:"",user:{}}),U=Object(c.a)(z,2),q=U[0],Y=U[1],Z=function(){l(!a)},_=function(e,t){"clickaway"!==t&&f(!1)};return Object(n.useEffect)((function(){k&&(f(!0),setTimeout((function(){return C("")}),4e3))}),[k]),r.a.createElement("div",{className:"App"},r.a.createElement(D.a,null,r.a.createElement(H,{auth:q,setAuth:Y,setInfo:C,toggle:Z}),r.a.createElement(ne.a,{to:"/"}),r.a.createElement(ne.d,null,r.a.createElement(ne.b,{path:"/",exact:!0},r.a.createElement(v,{getServerImages:function(e,t,a,n){y({q:t,source:e,hits:a}),s(!0),I.a.get("".concat(T,"api/").concat(e.toLowerCase(),"?q=").concat(t,"&hits=").concat(a,"&page=").concat(n)).then((function(e){P(e.data),console.log(e.data)})).catch(console.log).finally((function(){return s(!1)}))},page:L,setPage:B}),w?r.a.createElement(n.Fragment,null,w.length===b.hits?r.a.createElement(ue.a,{color:"primary",onClick:function(){return B(L+1)},style:{position:"fixed",zIndex:2,bottom:"2rem",right:"2rem"},variant:"extended"},r.a.createElement(h.a,null,"Next")):null,u?r.a.createElement(N.a,null):null,L>1?r.a.createElement(ue.a,{onClick:function(){return B(L-1)},style:{position:"fixed",zIndex:2,bottom:"2rem",left:"2rem"},color:"secondary",variant:"extended"},r.a.createElement(h.a,null,"Previous")):null,r.a.createElement(te,{auth:q,setAuth:Y,images:w,toggle:Z})):null),r.a.createElement(ne.b,{path:"/profile"},r.a.createElement(ie,{auth:q,setAuth:Y,toggle:Z,setInfo:C})))),r.a.createElement(x.a,{open:g,autoHideDuration:4e3,onClose:_},r.a.createElement(se,{onClose:_,severity:"success"},k)),r.a.createElement(ae,{open:a,toggle:Z,setAuth:Y,setInfo:C}))};o.a.render(r.a.createElement(me,null),document.getElementById("root"))}},[[101,1,2]]]);
//# sourceMappingURL=main.77a9569c.chunk.js.map